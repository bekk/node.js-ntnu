<style>
  .light {
    background: #fff;
    color: #1b1b1b;
  }

  .emphasis {
    background: #fd5157;
    color: #fff;
  }

  .emphasis h1,
  .emphasis h2,
  .emphasis h3,
  .emphasis h4 {
    color: #1b1b1b;
  }

  .light h1,
  .light h2,
  .light h3,
  .light h4 {
    color: #1b1b1b;
  }

  h1, h2, h3, h4 {
    text-transform: none !important;
  }

  .dark {
    background: #1b1b1b;
  }

  .center {
    display: flex;
  }

  .center > * {
    margin: auto;
    text-align: center !important;
  }

  h1, h2, h3, h4 {
    text-align: left;
  }

  .reveal p {
    font-size: 200%;
    text-align: left;
  }
  span.uthev {
    color: #fd5157;
  }

  .venn > div {
    border-radius: 50%;
    height: 300px;
    width: 300px;
    background: #fd5157;
    float: left;
    display: flex;
    opacity: 0.5;
  }

  .venn > div:nth-child(2) {
    height: 400px;
    width: 400px;
    font-size: 250%;
  }

  .venn > div > div {
    margin: auto;
    color: #1b1b1b;
  }

  .venn > div:first-child {
    margin-top: 50px;
    margin-right: -150px;
  }

  .venn > div:last-child {
    margin-top: 50px;
    margin-left: -150px;
  }

  .venn > div:first-child > div{
    margin-left: 9%;
  }

  .venn > div:last-child > div {
    margin-right: 9%;
  }

  pre code {
    font-size: 200% !important;
    line-height: 120% !important;
    max-height: none !important;
  }

  ul {
    font-size: 150% !important;
    line-height: 120% !important;
    display: block !important;
  }


</style>

<section class="emphasis" data-background="#fd5157">
  <h1>Før vi starter:</h1>
  <h2><code>$ git clone git@github.com:/bekkopen/node.js-ntnu</code></h2>
  <h2><code>$ cd node.js-ntnu/del3</code></h2>
  <h2><code>$ npm install</code></h2>
</section>

<section class="center">
  <h1>NODE.JS DEL III:</h1>
  <h1>NODE.JS FOR FRONTEND</h1>
  <p>Stian Veum Møllersen</p>
  <p>BEKK</p>
</section>

<section class="center">
  <h1>NODE.JS SOM VERKTØYPLATFORM</h1>
</section>

<section>
  <h1>Vanlige oppgaver</h1>
  <p class="fragment">
    Kompilere ting (less -> css, cs -> js)
  </p>
  <p class="fragment">
    Konkatenere og minifisere
  </p>
  <p class="fragment">
    Kjøre tester
  </p>
</section>

<section class="center">
  <h1>JavaScript tools for JavaScript developers</h1>
</section>

<section>
  <h1>Hvorfor Node.js?</h1>
  <p class="fragment">
    Digert økosystem i <code>npm</code>
  </p>
  <p class="fragment">
    Behagelig å jobbe med IO
  </p>
  <p class="fragment">
    Det er en js-runtime
  </p>
</section>

<section>
  <h1>Node.js vs Browser</h1>
  <div class="venn">
    <div><div>Node API</div></div>
    <div><div>JavaScript</div></div>
    <div><div>DOM API</div></div>
  </div>
</section>

<section>
  <h1>Node.js vs Browser</h1>
  <p>Eksempel:</p>
  <pre><code class="javascript">
var button = document.createElement('button');
button.innerText = 'PRESS ME';
document.body.appendChild(button);
  </code></pre>
  <a target="_blank" href="about:blank">Test</a>
</section>

<section>
  <h1>Node.js vs Browser</h1>
  <p>Eksempel:</p>
  <pre><code class="javascript">
var cubes = [1, 2, 3, 4, 5].map(function (e) {
  return e*3;
});
console.log(cubes);
  </code></pre>
  <a target="_blank" href="about:blank">Test</a>
</section>

<section class="center">
  <h1>Hvordan bruker vi verktøy med Node.js?</h1>
</section>

<section>
  <h1>Kommandolinja</h1>
  <pre class="fragment"><code class="bash">
$ npm install -g less
  </code></pre>
  <pre class="fragment"><code class="bash">
$ lessc styles.less styles.css
  </code></pre>
</section>

<section>
  <h1>JS API</h1>
  <pre class="fragment"><code class="bash">
$ npm install less
  </code></pre>
  <pre class="fragment"><code class="javascript">
var less = require('less');
var fs = require('fs');

var file = fs.readFileSync('styles.less');

less.render(file, function (err, css) {
  if(err) return;

  fs.writeFileSync('styles.css', css);
});
  </code></pre>
  <pre class="fragment"><code class="bash">
$ node script.js
  </code></pre>
</section>

<section>
  <h1><code>npm-scripts</code></h1>
  <p class="fragment">
    En del av package.json formatet
  </p>
  <p class="fragment">
    Kjøres med <code>npm run</code>
  </p>
</section>

<section>
  <h1><code>npm-scripts</code></h1>
  <pre class="fragment"><code class="bash">
$ npm run [script-name]
  </code></pre>
  <p class="fragment">
    Noen scripts er koblet sammen med andre npm-kommandoer. <code>npm start</code> og <code>npm test</code> er de to vanligste.
  </p>
</section>

<section>
  <h1><code>npm-scripts</code></h1>
  <pre><code class="json">
...
"scripts": {
  "less": "lessc styles.less styles.css"
},
...
  </code></pre>
  <pre class="fragment"><code class="bash">
$ npm run less
  </code></pre>
</section>

<section class="center">
  <h2>Scripts definert på denne måten har tilgang på lokale pakker, så en slipper å installere ting med -g.</h2>
</section>

<section>
  <h1>Oppgave 1</h1>
  <p>Dere finner oppgaveteksten i README.md i <span class="uthev">del3/oppgave1</span></p>
</section>

<section class="center">
  <h1>NODE.JS SOM KILDE TIL JAVASCRIPT</h1>
</section>

<section class="center">
  <h1><span class="uthev">NPM</span> SOM KILDE TIL JAVASCRIPT</h1>
</section>

<section>
  <h1><code>npm install</code></h1>
  <p class="fragment">
    Det ligger 100 000 modules på npm per i dag
  </p>
  <p class="fragment">
    Det hadde vært utrolig kult å benytte seg av det.
  </p>
</section>

<section class="center">
  <h1>BROWSERIFY</h1>
  <h1>MODULARITY FOR EVERYONE!</h1>
</section>

<section>
  <h1>Hvorfor modules?</h1>
  <p class="fragment">
    Globale variabler og implsitte avhengigheter er en stor kilde til feil, det
    er vanskelig å gjenbruke og det skalerer dårlig.
  </p>
</section>

<section>
  <h1>JavaScript modules</h1>
  <p class="fragment">
    JavaScript har ikke native modules (for øyeblikket).
  </p>
  <br />
  <p class="fragment">
    Derfor låner vi module-systemet til Node.js.
  </p>
</section>

<section>
  <h1>Node.js modules</h1>
  <pre><code class="javascript">
var npmDep1 = require('npmDep1');
var localDep2 = require('./localDep2');

module.exports = function someFunction() {
  npmDep1();
  localDep2();
}
  </code></pre>
</section>

<section>
  <h1>Node.js modules</h1>
  <pre><code class="javascript">
var npmDep1 = require('npmDep1');
var localDep2 = require('./localDep2');

module.exports.someFunction = function someFunction() {
  npmDep1();
  localDep2();
};

module.exports.someOtherFunction = localDep2;
  </code></pre>
</section>

<section>
  <h1>Hvorfor Browserify?</h1>
  <p class="fragment">Browserify implementerer require-funksjonen og module.exports som Node.js gjør.</p>
  <br />
  <p class="fragment">Det gjør at vi kan benytte samme module-syntax utenfor Node.js.</p>
</section>

<section>
  <h1>Hva gjør Browserify?</h1>
  <p class="fragment">Browserify leser dependency-grafen til en js-fil og syr alt sammen til en bundle.</p>
  <br />
  <p class="fragment">I tillegg eksponerer Browserify funksjonalitet for å utføre transforms på hver fil som blir inkludert i bundelen.</p>
</section>

<section class="center">
  <h1>Men hva med forskjellene mellom Node.js og Browseren?</h1>
</section>

<section>
  <h1>Hvordan bruke Browserify?</h1>
  <div class="fragment">
    <p>Mest grunnleggende:</p>
    <pre><code class="bash">$ browserify app.js -o bundle.js</code></pre>
  </div>
  <div class="fragment">
    <p>Avansert:</p>
    <pre><code class="javascript">
var browserify = require('browserify');
var fs = require('fs');

var b = browserify();
var bundleFile = fs.createWriteStream('./bundle.js');

b.add('./app.js');
b.bundle().pipe(bundleFile);
    </code></pre>
  </div>
</section>

<section>
  <h1>Oppgave 2</h1>
  <p>Dere finner oppgaveteksten i README.md i <span class="uthev">del3/oppgave2</span></p>
</section>

<section class="center">
  <h1>TAKK FOR MEG</h1>
</section>

<section class="center emphasis" data-background="#fd5157">
  <h1>BRYGGHUS9 NESTE</h1>
</section>
